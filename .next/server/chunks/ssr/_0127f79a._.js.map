{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/facuo/OneDrive/Documentos/UTN/4to/DAO/TP-Git/tp_dao/lib/api/client.ts"],"sourcesContent":["export async function api<T>(\r\n  path: string,\r\n  init?: RequestInit & { searchParams?: Record<string, string | number | boolean | undefined> }\r\n): Promise<T> {\r\n  const url = new URL(path, typeof window !== 'undefined' ? window.location.origin : 'http://localhost:3000');\r\n  if (init?.searchParams) {\r\n    Object.entries(init.searchParams).forEach(([k, v]) => {\r\n      if (v !== undefined && v !== null) url.searchParams.set(k, String(v));\r\n    });\r\n  }\r\n  const res = await fetch(url.toString(), {\r\n    ...init,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(init?.headers || {}),\r\n    },\r\n  });\r\n  if (!res.ok) {\r\n    const errorText = await res.text().catch(() => '');\r\n    throw new Error(errorText || `Error ${res.status}`);\r\n  }\r\n  if (res.status === 204) return undefined as unknown as T;\r\n  return res.json() as Promise<T>;\r\n}\r\n"],"names":[],"mappings":";;;;AAAO,eAAe,IACpB,IAAY,EACZ,IAA6F;IAE7F,MAAM,MAAM,IAAI,IAAI,MAAM,sCAAgC,0BAAyB;IACnF,IAAI,MAAM,cAAc;QACtB,OAAO,OAAO,CAAC,KAAK,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE;YAC/C,IAAI,MAAM,aAAa,MAAM,MAAM,IAAI,YAAY,CAAC,GAAG,CAAC,GAAG,OAAO;QACpE;IACF;IACA,MAAM,MAAM,MAAM,MAAM,IAAI,QAAQ,IAAI;QACtC,GAAG,IAAI;QACP,SAAS;YACP,gBAAgB;YAChB,GAAI,MAAM,WAAW,CAAC,CAAC;QACzB;IACF;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,YAAY,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;QAC/C,MAAM,IAAI,MAAM,aAAa,CAAC,MAAM,EAAE,IAAI,MAAM,EAAE;IACpD;IACA,IAAI,IAAI,MAAM,KAAK,KAAK,OAAO;IAC/B,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/facuo/OneDrive/Documentos/UTN/4to/DAO/TP-Git/tp_dao/lib/api/endpoints.ts"],"sourcesContent":["import { api } from './client';\r\nimport type { Page, Paciente, Medico, Especialidad, Turno, Receta, ID } from './dto';\r\n\r\n// PACIENTES\r\nexport const listPacientes = (q = '', page = 1, size = 10) =>\r\n  api<Page<Paciente>>('/api/pacientes', { searchParams: { search: q, page, size } });\r\n\r\nexport const getPaciente = (id: ID) => api<Paciente>(`/api/pacientes/${id}`);\r\nexport const createPaciente = (data: Partial<Paciente>) =>\r\n  api<Paciente>('/api/pacientes', { method: 'POST', body: JSON.stringify(data) });\r\nexport const updatePaciente = (id: ID, data: Partial<Paciente>) =>\r\n  api<Paciente>(`/api/pacientes/${id}`, { method: 'PUT', body: JSON.stringify(data) });\r\nexport const deletePaciente = (id: ID) =>\r\n  api<void>(`/api/pacientes/${id}`, { method: 'DELETE' });\r\n\r\n// MEDICOS y ESPECIALIDADES\r\nexport const listMedicos = (search = '') =>\r\n  api<Medico[]>('/api/medicos', { searchParams: { search } });\r\nexport const getMedico = (id: ID) => api<Medico>(`/api/medicos/${id}`);\r\nexport const createMedico = (data: Partial<Medico>) =>\r\n  api<Medico>('/api/medicos', { method: 'POST', body: JSON.stringify(data) });\r\nexport const updateMedico = (id: ID, data: Partial<Medico>) =>\r\n  api<Medico>(`/api/medicos/${id}`, { method: 'PUT', body: JSON.stringify(data) });\r\nexport const deleteMedico = (id: ID) => api<void>(`/api/medicos/${id}`, { method: 'DELETE' });\r\n\r\nexport const listEspecialidades = () => api<Especialidad[]>('/api/especialidades');\r\nexport const createEspecialidad = (data: Partial<Especialidad>) =>\r\n  api<Especialidad>('/api/especialidades', { method: 'POST', body: JSON.stringify(data) });\r\n\r\n// TURNOS\r\nexport const listTurnos = (params: {\r\n  medicoId?: ID; pacienteId?: ID; desde?: string; hasta?: string; estado?: string;\r\n} = {}) => api<Turno[]>('/api/turnos', { searchParams: params });\r\n\r\nexport const createTurno = (data: Partial<Turno>) =>\r\n  api<Turno>('/api/turnos', { method: 'POST', body: JSON.stringify(data) });\r\n\r\nexport const getTurno = (id: ID) => api<Turno>(`/api/turnos/${id}`);\r\n\r\nexport const patchEstadoTurno = (id: ID, estado: string) =>\r\n  api<Turno>(`/api/turnos/${id}/estado`, { method: 'PATCH', body: JSON.stringify({ estado }) });\r\n\r\n// RECETAS\r\nexport const listRecetas = (params: { turnoId?: ID; pacienteId?: ID; medicoId?: ID } = {}) =>\r\n  api<Receta[]>('/api/recetas', { searchParams: params });\r\n\r\nexport const createReceta = (data: Partial<Receta>) =>\r\n  api<Receta>('/api/recetas', { method: 'POST', body: JSON.stringify(data) });\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAIO,MAAM,gBAAgB,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,EAAE,OAAO,EAAE,GACvD,IAAA,2HAAG,EAAiB,kBAAkB;QAAE,cAAc;YAAE,QAAQ;YAAG;YAAM;QAAK;IAAE;AAE3E,MAAM,cAAc,CAAC,KAAW,IAAA,2HAAG,EAAW,CAAC,eAAe,EAAE,IAAI;AACpE,MAAM,iBAAiB,CAAC,OAC7B,IAAA,2HAAG,EAAW,kBAAkB;QAAE,QAAQ;QAAQ,MAAM,KAAK,SAAS,CAAC;IAAM;AACxE,MAAM,iBAAiB,CAAC,IAAQ,OACrC,IAAA,2HAAG,EAAW,CAAC,eAAe,EAAE,IAAI,EAAE;QAAE,QAAQ;QAAO,MAAM,KAAK,SAAS,CAAC;IAAM;AAC7E,MAAM,iBAAiB,CAAC,KAC7B,IAAA,2HAAG,EAAO,CAAC,eAAe,EAAE,IAAI,EAAE;QAAE,QAAQ;IAAS;AAGhD,MAAM,cAAc,CAAC,SAAS,EAAE,GACrC,IAAA,2HAAG,EAAW,gBAAgB;QAAE,cAAc;YAAE;QAAO;IAAE;AACpD,MAAM,YAAY,CAAC,KAAW,IAAA,2HAAG,EAAS,CAAC,aAAa,EAAE,IAAI;AAC9D,MAAM,eAAe,CAAC,OAC3B,IAAA,2HAAG,EAAS,gBAAgB;QAAE,QAAQ;QAAQ,MAAM,KAAK,SAAS,CAAC;IAAM;AACpE,MAAM,eAAe,CAAC,IAAQ,OACnC,IAAA,2HAAG,EAAS,CAAC,aAAa,EAAE,IAAI,EAAE;QAAE,QAAQ;QAAO,MAAM,KAAK,SAAS,CAAC;IAAM;AACzE,MAAM,eAAe,CAAC,KAAW,IAAA,2HAAG,EAAO,CAAC,aAAa,EAAE,IAAI,EAAE;QAAE,QAAQ;IAAS;AAEpF,MAAM,qBAAqB,IAAM,IAAA,2HAAG,EAAiB;AACrD,MAAM,qBAAqB,CAAC,OACjC,IAAA,2HAAG,EAAe,uBAAuB;QAAE,QAAQ;QAAQ,MAAM,KAAK,SAAS,CAAC;IAAM;AAGjF,MAAM,aAAa,CAAC,SAEvB,CAAC,CAAC,GAAK,IAAA,2HAAG,EAAU,eAAe;QAAE,cAAc;IAAO;AAEvD,MAAM,cAAc,CAAC,OAC1B,IAAA,2HAAG,EAAQ,eAAe;QAAE,QAAQ;QAAQ,MAAM,KAAK,SAAS,CAAC;IAAM;AAElE,MAAM,WAAW,CAAC,KAAW,IAAA,2HAAG,EAAQ,CAAC,YAAY,EAAE,IAAI;AAE3D,MAAM,mBAAmB,CAAC,IAAQ,SACvC,IAAA,2HAAG,EAAQ,CAAC,YAAY,EAAE,GAAG,OAAO,CAAC,EAAE;QAAE,QAAQ;QAAS,MAAM,KAAK,SAAS,CAAC;YAAE;QAAO;IAAG;AAGtF,MAAM,cAAc,CAAC,SAA2D,CAAC,CAAC,GACvF,IAAA,2HAAG,EAAW,gBAAgB;QAAE,cAAc;IAAO;AAEhD,MAAM,eAAe,CAAC,OAC3B,IAAA,2HAAG,EAAS,gBAAgB;QAAE,QAAQ;QAAQ,MAAM,KAAK,SAAS,CAAC;IAAM","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/facuo/OneDrive/Documentos/UTN/4to/DAO/TP-Git/tp_dao/app/turnos/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useEffect, useState } from 'react';\r\nimport { listTurnos, listPacientes, listMedicos } from '@/lib/api/endpoints';\r\nimport type { Turno, Paciente, Medico } from '@/lib/api/dto';\r\n\r\nexport default function TurnosPage() {\r\n  const [rows, setRows] = useState<Turno[]>([]);\r\n  const [estado, setEstado] = useState<string>('');\r\n  const [pacNames, setPacNames] = useState<Record<number, string>>({});\r\n  const [medNames, setMedNames] = useState<Record<number, string>>({});\r\n\r\n  async function loadTurnos() {\r\n    const data = await listTurnos({ estado: estado || undefined });\r\n    setRows(data);\r\n  }\r\n\r\n  useEffect(() => { loadTurnos(); }, [estado]);\r\n\r\n  // Cargar diccionarios de nombres (1 vez)\r\n  useEffect(() => {\r\n    (async () => {\r\n      const [p, m] = await Promise.all([\r\n        listPacientes('', 1, 500).then(r => r.data as Paciente[]),\r\n        listMedicos().then(r => r as Medico[]),\r\n      ]);\r\n      setPacNames(Object.fromEntries(p.map(x => [x.id, `${x.apellido}, ${x.nombre}`])));\r\n      setMedNames(Object.fromEntries(m.map(x => [x.id, `${x.apellido}, ${x.nombre}`])));\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <section className=\"grid gap-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-xl font-semibold\">Turnos</h1>\r\n        <Link href=\"/turnos/nuevo\" className=\"btn\">Nuevo turno</Link>\r\n      </div>\r\n\r\n      <div className=\"card grid gap-3 overflow-x-auto\">\r\n        <div className=\"flex gap-2\">\r\n          <select className=\"input max-w-xs\" value={estado} onChange={e=>setEstado(e.target.value)}>\r\n            <option value=\"\">Todos los estados</option>\r\n            <option value=\"asignado\">Asignado</option>\r\n            <option value=\"cancelado_medico\">Cancelado por médico</option>\r\n            <option value=\"cancelado_paciente\">Cancelado por paciente</option>\r\n            <option value=\"atendido\">Atendido</option>\r\n            <option value=\"ausente\">Ausente</option>\r\n          </select>\r\n          <button className=\"btn-outline\" onClick={loadTurnos}>Refrescar</button>\r\n        </div>\r\n\r\n        <table className=\"table table-fixed\">\r\n          {/* prettier-ignore */}\r\n          <colgroup><col className=\"w-16\"/><col className=\"w-[28ch]\"/><col className=\"w-[28ch]\"/><col className=\"w-[26ch]\"/><col className=\"w-[18ch]\"/><col className=\"w-20\"/></colgroup>\r\n\r\n          <thead>\r\n            <tr className=\"text-sm\">\r\n              <th className=\"px-3 text-center\">ID</th>\r\n              <th className=\"px-3 text-left\">Paciente</th>\r\n              <th className=\"px-3 text-left\">Médico</th>\r\n              <th className=\"px-3 text-left\">Fecha/Hora</th>\r\n              <th className=\"px-3 text-left\">Estado</th>\r\n              <th className=\"px-3 text-right\"></th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {rows.map(t => (\r\n              <tr key={t.id} className=\"align-middle\">\r\n                <td className=\"px-3 text-center font-mono tabular-nums\">{t.id}</td>\r\n                <td className=\"px-3 text-left\">{pacNames[t.paciente_id] || `#${t.paciente_id}`}</td>\r\n                <td className=\"px-3 text-left\">{medNames[t.medico_id] || `#${t.medico_id}`}</td>\r\n                <td className=\"px-3 text-left\">{new Date(t.fecha_hora).toLocaleString()}</td>\r\n                <td className=\"px-3 text-left capitalize\">{t.estado.replace('_',' ')}</td>\r\n                <td className=\"px-3 text-right whitespace-nowrap\">\r\n                  <Link className=\"link\" href={`/turnos/${t.id}`}>Ver</Link>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}